jQuery(function($){function e(e){e.click(function(){var e,t;if(void 0!==e)return void e.open();e=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1});var a=$(this).attr("rel");formfield=$(this).siblings(".meta_box_upload_image"),preview=$(this).siblings(".meta_box_preview_image"),e.on("insert",function(){json=e.state().get("selection").first().toJSON(),imgurl=json.url,id=json.id,preview.attr("src",imgurl),formfield.val(id)}),e.open()})}function t(e){e.click(function(){var e=$(this).parent().siblings(".meta_box_default_image").text();return $(this).parent().siblings(".meta_box_upload_image").val(""),$(this).parent().siblings(".meta_box_preview_image").attr("src",e),!1})}function a(e){e.click(function(){var e,t;if(void 0!==e)return void e.open();e=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1});var a=$(this).attr("rel");formfield=$(this).siblings(".meta_box_upload_file_new"),e.on("insert",function(){json=e.state().get("selection").first().toJSON(),console.log("id:"+json.id),fileurl=json.url,id=json.id,formfield.val(fileurl)}),e.open()})}function o(e){e.click(function(){return $(this).parent().siblings(".meta_box_upload_file_new").val(""),!1})}function i(){$(".qw-conditional-fields").each(function(){var e="";$(this).find("option:selected").each(function(){$(this).attr("data-tohide")&&($.toHideArray=$(this).attr("data-tohide").split("[+]"),$.toHideArray.length>0&&$.each($.toHideArray,function(e,t){$(t).not("qw-hidden")&&$(t).addClass("qw-hidden")})),$(this).attr("data-toreveal")&&($.toRevealArray=$(this).attr("data-toreveal").split("[+]"),$.toRevealArray.length>0&&$.each($.toRevealArray,function(e,t){$(t).removeClass("qw-hidden")}))})})}function n(){function i(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].val)}e($(".meta_box_upload_image_button")),a($(".meta_box_upload_file_new_button")),t($(".meta_box_clear_image_button")),o($(".meta_box_clear_file_button")),$(".meta_box_clear_file_button").click(function(){return $(this).parent().siblings(".meta_box_upload_file").val(""),$(this).parent().siblings(".meta_box_filename").text(""),$(this).parent().siblings(".meta_box_file").removeClass("checked"),!1}),$(".meta_box_repeatable_remove").live("click",function(){return $(this).closest("tr").remove(),!1}),$(".meta_box_repeatable tbody").sortable({opacity:.6,revert:!0,cursor:"move",handle:".hndle"}),$(".sort_list").sortable({connectWith:".sort_list",opacity:.6,revert:!0,cursor:"move",cancel:".post_drop_sort_area_name",items:"li:not(.post_drop_sort_area_name)",update:function(e,t){var a=$(this).sortable("toArray"),o=$(this).attr("id");$(".store-"+o).val(a)}}),$(".sort_list").disableSelection(),$.prototype.chosen&&$(".chosen").chosen({allow_single_deselect:!0})}$(document).ready(function(){$("form").attr("novalidate","novalidate")}),jQuery(document).ready(function($){$(".meta_box_color").wpColorPicker()}),i(),$(".qw-conditional-fields").change(function(){i()}),n(),$(".meta_box_repeatable_add").live("click",function(i){i.preventDefault();var n=$(this).closest(".meta_box_repeatable").find("tbody tr:last-child"),r=n.clone();r.find("select.chosen").removeAttr("style","").removeAttr("id","").removeClass("chzn-done").data("chosen",null).next().remove(),r.find("input.regular-text, textarea, select, .meta_box_upload_file ").val(""),r.find("input[type=checkbox], input[type=radio]").attr("checked",!1),r.find("span.meta_box_filename").html("");var l=r.find(".meta_box_upload_file_button"),s=r.find(".meta_box_upload_image_button"),c=r.find(".meta_box_clear_image_button");r.find("img.meta_box_preview_image").attr("src","");var d=r.find(".meta_box_upload_file_new_button"),m=r.find(".meta_box_upload_file_new_button"),_=r.find(".meta_box_clear_file_button");e(s),a(m),t(c),o(c),n.after(r),r.find("input, textarea, select").attr("name",function(e,t){return t.replace(/(\d+)/,function(e,t){return Number(t)+1})});var u=[];return $("input.repeatable_id:text").each(function(){u.push($(this).val())}),r.find("input.repeatable_id").val(Number(Math.max.apply(Math,u))+1),$.prototype.chosen&&r.find("select.chosen").chosen({allow_single_deselect:!0}),!1}),$("a.qw-iconreference-open").click(function(e){e.preventDefault(),$("body").addClass("qwModalFormOpen"),$("#qwModalForm").height($(window).height()),$.iconTarget=$(this).attr("data-target"),$("#adminmenuwrap").css({"z-index":"10"})}),$("#qw-closemodal").on("click",function(e){$("body").removeClass("qwModalFormOpen"),$("#adminmenuwrap").css({"z-index":"1000"})}),$("#qwiconsMarket").on("click",".btn",function(e){e.preventDefault();var t=$(this).attr("data-icon");if(void 0!=$.iconTarget){var a=$.iconTarget;console.log(a),"tinymce"!==a?($("#"+$.iconTarget).val(t),$("#theIcon"+$.iconTarget).removeClass().addClass(t+" bigicon")):tinymce.activeEditor.execCommand("mceInsertContent",!1,'[qticon class="'+t+'" size="s|m|l|xl|xxl"]'),$("body").removeClass("qwModalFormOpen"),$("#adminmenuwrap").css({"z-index":"1000"})}}),$(".qw_hider").click(function(e,t){var a=$(this);$(".qw_hiddenable").addClass("qw-hide").promise().done(function(){$(".qw_hiddenable .qw_hider").addClass("dashicons-hidden").removeClass("dashicons-visibility"),a.closest(".qw_hiddenable").removeClass("qw-hide"),a.removeClass("dashicons-hidden").addClass("dashicons-visibility")})}),$(".geocodefunction").click(function(e,t){var a=$(this),o=a.attr("data-target"),i=$("#address-"+o).attr("value"),n=$("#results-"+o),r=new google.maps.Geocoder,l=$("#map-"+o);r.geocode({address:i},function(e,t){if(t===google.maps.GeocoderStatus.OK){l.height("180px");var a=new google.maps.Map(document.getElementById("map-"+o),{zoom:10,center:{lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()}});a.setCenter(e[0].geometry.location);var i=new google.maps.Marker({map:a,position:e[0].geometry.location}),e=e[0].geometry.location.lat()+","+e[0].geometry.location.lng();n.html(""),$("#"+o).attr("value",e)}else n.html("Geocode was not successful for the following reason: "+t)})}),$(".qt-tabs .qt-tabnav a").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href");console.log(a),t.closest(".qt-tabs").find(".qt-tab.active").removeClass("active"),$(a).addClass("active")})});